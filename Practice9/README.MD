# Завдання загальне для всіх
# Завдання 9.1

Напишіть програму, яка читає файл /etc/passwd за допомогою команди getent passwd, щоб дізнатись, які облікові записи визначені на вашому комп’ютері.
Програма повинна визначити, чи є серед них звичайні користувачі (ідентифікатори UID повинні бути більші за 500 або 1000, залежно від вашого дистрибутива), окрім вас.

![https://github.com/diebymyhand/aspz/blob/main/Practice9/task9.1/1.png]

Програма визначає, які користувачі зареєстровані в системі. Для отримання списку усіх облікових засобів виконується команда getent passwd.
За допомогою sscanf(line, "%99[^:]:x:%d", username, &uid) до першої : вона витягує ім’я користувача і UID, пропускаючи частину з паролем. 
Якщо UID більше або дорівнює 1000, що відповідає звичайному користувачу, і не збігається з UID поточного користувача, то ім’я та UID виводяться на екран.

---

# Завдання 9.2

Напишіть програму, яка виконує команду cat /etc/shadow від імені адміністратора, хоча запускається від звичайного користувача.
(Ваша програма повинна робити необхідне, виходячи з того, що конфігурація системи дозволяє отримувати адміністративний доступ за допомогою відповідної команди.)

![https://github.com/diebymyhand/aspz/blob/main/Practice9/task9.2/1.png]

Програма дозволяє переглянути вміст файлу /etc/shadow, який містить зашифровані паролі користувачів і доступний лише адміністратору. 
Вона виконує команду sudo cat /etc/shadow. Команда system() викликає оболонку для виконання цієї команди. 
Якщо користувач має право використовувати sudo і введе свій пароль, програма виведе вміст файлу.

---

# Завдання 9.3

Напишіть програму, яка від імені root копіює файл, який вона перед цим створила від імені звичайного користувача. Потім вона повинна помістити копію у домашній каталог звичайного користувача.
Далі, використовуючи звичайний обліковий запис, програма намагається змінити файл і зберегти зміни. Що відбудеться?
Після цього програма намагається видалити цей файл за допомогою команди rm. Що відбудеться?

Ця програма виконує кілька операцій з файлами:
Спочатку вона створює файл example.txt і записує в нього текст "This is a test file created by a normal user.". Після цього файл закривається.
Потім вона копіює цей файл до каталогу /root/ за допомогою команди sudo cp, що дає права адміністратора.
Після цього файл переміщується до домашнього каталогу користувача за допомогою команди sudo mv.
Програма відкриває файл для запису та додає до нього новий текст "Additional data added by a normal user.".
В кінці програма видаляє файл за допомогою команди rm, знову використовуючи права адміністратора.

---

# Завдання 9.4

Напишіть програму, яка по черзі виконує команди whoami та id, щоб перевірити стан облікового запису користувача, від імені якого вона запущена.
Є ймовірність, що команда id виведе список різних груп, до яких ви належите. Програма повинна це продемонструвати.

![https://github.com/diebymyhand/aspz/blob/main/Practice9/task9.4/1.png]

Програма спочатку виконує команду whoami, щоб вивести ім'я користувача, потім запускає команду id, щоб показати більш детальну інформацію про ідентифікатори користувача та груп. 
Це дозволяє перевірити, до яких груп належить поточний користувач і які права він має в системі.

---

# Завдання 9.5

Напишіть програму, яка створює тимчасовий файл від імені звичайного користувача. Потім від імені суперкористувача використовує команди chown і chmod, щоб змінити тип володіння та права доступу.
Програма повинна визначити, в яких випадках вона може виконувати читання та запис файлу, використовуючи свій обліковий запис.

![https://github.com/diebymyhand/aspz/blob/main/Practice9/task9.5/1.png]

Програма створює тимчасовий файл /tmp/test_access_file.txt за допомогою функції open, записує в нього текст і закриває файл.
Для зміни власника файлу на root використовується команда system("sudo chown root:root /tmp/test_access_file.txt").
Команда system("sudo chmod 600 /tmp/test_access_file.txt") змінює права доступу до файлу на 600, що дозволяє лише власнику файлу читати та записувати в нього.

---

# Завдання 9.6

Напишіть програму, яка виконує команду ls -l, щоб переглянути власника і права доступу до файлів у своєму домашньому каталозі, в /usr/bin та в /etc.
Продемонструйте, як ваша програма намагається обійти різні власники та права доступу користувачів, а також здійснює спроби читання, запису та виконання цих файлів.

![https://github.com/diebymyhand/aspz/blob/main/Practice9/task9.6/1.png]

![https://github.com/diebymyhand/aspz/blob/main/Practice9/task9.6/2.png]

Ця програма виконує команду ls -l для трьох каталогів: домашнього каталогу користувача, /usr/bin та /etc, щоб показати власників файлів і їх права доступу в цих директоріях. 
Потім вона демонструє спроби виконання різних операцій з файлами, таких як читання, запис і виконання, щоб показати, як права доступу (читання, запис, виконання) можуть обмежувати доступ до файлів залежно від їх власника та встановлених прав. 
Програма намагається здійснити ці операції на файлах, які належать різним користувачам чи групам, і відображає помилки доступу, якщо відповідні права не дозволяють виконати операцію.

---

# Завдання по варіантах
# Варіант 5

Змоделюйте ситуацію, де користувач має лише права на запис до файлу, але не може його прочитати. 
Як це можливо, і які наслідки для безпеки або роботи програм?

![https://github.com/diebymyhand/aspz/blob/main/Practice9/var5/1.png]

В Unix-подібних системах можна окремо налаштовувати права на читання, запис і виконання файлів. 
Якщо файлу встановити лише право на запис за допомогою chmod 200, то користувач зможе записувати в файл, але не зможе його прочитати.
Такий файл може бути використаний для захисту конфіденційної інформації - дані можна додавати або оновлювати, але не читати. Це зменшує ризик витоку інформації, якщо хтось отримає лише доступ до запису.
Однак це може порушити логіку програм, які спочатку читають файл, а потім записують. У результаті можуть виникати збої, непередбачувана поведінка або втрата даних, якщо права доступу не перевіряються.

