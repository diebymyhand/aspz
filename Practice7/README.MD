# Завдання для всіх
# Завдання 7.1

Використайте popen(), щоб передати вивід команди rwho (команда UNIX) до more (команда UNIX) у програмі на C.

---

Ця програма запускає команду rwho, яка показує список користувачів, що зараз працюють в системі, і передає її вивід до команди more, яка виводить текст посторінково. 
Програма використовує функцію popen() для створення двох підпроцесів і організовує передачу даних між ними.

---

# Завдання 7.2

Напишіть програму мовою C, яка імітує команду ls -l в UNIX — виводить список усіх файлів у поточному каталозі та перелічує права доступу тощо.
(Варіант вирішення, що просто виконує ls -l із вашої програми, — не підходить.)

![](https://github.com/diebymyhand/aspz/blob/main/Practice7/task7.2/1.png)

Програма показує вміст поточної теки у стилі команди ls -l в UNIX. Вона відкриває теку, читає інформацію про кожен файл чи папку, пропускаючи . і .., і виводить:
-тип (файл, директорія тощо) та права доступу,
-кількість жорстких посилань,
-ім’я власника й групи,
-розмір у байтах,
-дату та час останньої зміни,
-ім’я файлу.

---

# Завдання 7.3

Напишіть програму, яка друкує рядки з файлу, що містять слово, передане як аргумент програми (проста версія утиліти grep в UNIX).

![](https://github.com/diebymyhand/aspz/blob/main/Practice7/task7.3/1.png)

Програма шукає задане слово у вказаному текстовому файлі. Вона приймає два аргументи з командного рядка: слово для пошуку та ім’я файлу. Далі відкриває файл, читає його пострічно і виводить лише ті рядки, які містять це слово.

---

# Завдання 7.4

Напишіть програму, яка виводить список файлів, заданих у вигляді аргументів, з зупинкою кожні 20 рядків, доки не буде натиснута клавіша (спрощена версія утиліти more в UNIX).

![](https://github.com/diebymyhand/aspz/blob/main/Practice7/task7.4/1.png)

Ця програма читає вміст одного або кількох текстових файлів і виводить його на екран по 20 рядків за раз. Після кожних 20 рядків вона ставить паузу та чекає, поки користувач натисне клавішу, щоб продовжити.
У main() програма перевіряє, чи передано імена файлів як аргументи. Для кожного файлу вона відкриває його через fopen() і передає у функцію display_file(). display_file() читає файл пострічно (fgets) і рахує кількість виведених рядків. Після 20 рядків викликається getchar(), щоб зробити паузу. По завершенню кожного файлу його закривають через fclose().

--- 

# Завдання 7.5

Напишіть програму, яка перелічує всі файли в поточному каталозі та всі файли в підкаталогах.

![](https://github.com/diebymyhand/aspz/blob/main/Practice7/task7.5/1.png)

Програма рекурсивно переглядає вміст поточної теки і виводить на екран список файлів і каталогів. Вона використовує системні функції opendir(), readdir(), stat() для роботи з директоріями та файлами.

---

# Завдання 7.6

Напишіть програму, яка перелічує лише підкаталоги у алфавітному порядку.

![](https://github.com/diebymyhand/aspz/blob/main/Practice7/task7.6/1.png)

Програма переглядає вміст поточної директорії і виводить список підкаталогів у алфавітному порядку, використовуючи стандартні функції opendir(), readdir(), stat() для роботи з директоріями та файлами.
У функції list_subdirectories() відкривається директорія через opendir(), потім перебираються всі її елементи за допомогою readdir(). Якщо елемент є підкаталогом, його ім'я зберігається в масиві subdirs. 
Після того як всі підкаталоги зібрані, програма сортує їх у алфавітному порядку за допомогою функції qsort(), що використовує функцію порівняння compare(). 

---

# Завдання 7.7

Напишіть програму, яка показує користувачу всі його/її вихідні програми на C, а потім в інтерактивному режимі запитує, чи потрібно надати іншим дозвіл на читання (read permission); у разі ствердної відповіді — такий дозвіл повинен бути наданий.

![](https://github.com/diebymyhand/aspz/blob/main/Practice7/task7.7/1.png)

За допомогою opendir() відкривається поточна директорія. Функція is_executable() перевіряє кожен файл на те, чи є він виконуваним. І якщо так, програма запитує користувача, чи він хоче додати права на читання до цього файлу. Виходячи з відповіді користувача, програма змінює права доступу до файлу за допомогою chmod().

---

# Завдання 7.8

Напишіть програму, яка надає користувачу можливість видалити будь-який або всі файли у поточному робочому каталозі. Має з’являтися ім’я файлу з запитом, чи слід його видалити.

![](https://github.com/diebymyhand/aspz/blob/main/Practice7/task7.8/1.png)

В інтерактивному режимі користувач обирає чи хоче він видалити один файл з поточного каталогу, чи всі одразу (програма просто перелічує всі файли у каталозі, а користувач вже обирає видаляти чи ні).
Код використовує стандартні функції для роботи з файлами та каталогами (opendir(), readdir(), remove()).

---

# Завдання 7.9

Напишіть програму на C, яка вимірює час виконання фрагмента коду в мілісекундах.

![](https://github.com/diebymyhand/aspz/blob/main/Practice7/task7.9/1.png)

Звичайний (мілі)секундомір.

---

# Завдання 7.10

Напишіть програму мовою C для створення послідовності випадкових чисел з плаваючою комою у діапазонах:
 (a) від 0.0 до 1.0
 (b) від 0.0 до n, де n — будь-яке дійсне число з плаваючою точкою.
 Початкове значення генератора випадкових чисел має бути встановлене так, щоб гарантувати унікальну послідовність.
Примітка: використання прапорця -Wall під час компіляції є обов’язковим

![](https://github.com/diebymyhand/aspz/blob/main/Practice7/task7.10/1.png)

---

# Завдання по варіантах
# Варіант 5

Створіть команду, яка виводить дерева викликів системних викликів (syscalls) під час виконання довільної програми без використання strace.

---

Для відстеження дерев системних викликів підійшла б команда perf trace ./var5, але, на жаль, як би я не намагався, встановити її на WSL2 не вдалось.
perf дає більш високорівневу інформацію про продуктивність програми, зокрема на рівні процесора та системних подій. Використовує більш складні механізми моніторингу, які дозволяють аналізувати продуктивність програми в контексті виконання на процесорі, пам'яті тощо.
